# ============================================================
#  VPS Shop Bot — конфигурация
#  Скопируй в .env и заполни все поля
# ============================================================

# ── Telegram ─────────────────────────────────────────────────
# Получи у @BotFather
BOT_TOKEN=1234567890:AABBCCddEEffGGhhIIjjKKll

# Твой Telegram ID (узнай у @userinfobot). Несколько — через запятую
ADMIN_IDS=123456789

# polling — для теста | webhook — для продакшена
BOT_RUN_MODE=polling

# ── Webhook (только если BOT_RUN_MODE=webhook) ────────────────
# Домен твоего сервера
WEBHOOK_URL=https://bot.example.com
WEBHOOK_PATH=/webhook
# Генерируй: openssl rand -hex 32
WEBHOOK_SECRET_TOKEN=generate_me_with_openssl

# ── PostgreSQL ────────────────────────────────────────────────
POSTGRES_DB=vpsbot
POSTGRES_USER=vpsbot
POSTGRES_PASSWORD=strong_password_here

# ── Redis ─────────────────────────────────────────────────────
REDIS_PASSWORD=redis_strong_password

# ── Proxmox ───────────────────────────────────────────────────
# IP адрес дедика в Hetzner
PROXMOX_HOST=https://1.2.3.4:8006
PROXMOX_USER=root@pam
# Имя и значение API токена (создай: Proxmox → Datacenter → API Tokens)
PROXMOX_TOKEN_NAME=bot
PROXMOX_TOKEN_VALUE=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
# Имя ноды (видно в Proxmox, обычно "pve")
PROXMOX_NODE=pve
PROXMOX_STORAGE=local-lvm
PROXMOX_BRIDGE=vmbr0
# Шлюз сервера (узнай в Hetzner Robot → твой сервер → IPs)
PROXMOX_GATEWAY=1.2.3.1
# Дополнительные IP для VPS (заказай в Hetzner Robot, через запятую)
PROXMOX_IP_POOL=5.9.1.10,5.9.1.11,5.9.1.12,5.9.1.13,5.9.1.14

# ── CryptoBot ─────────────────────────────────────────────────
CRYPTOBOT_ENABLED=true
# Получи у @CryptoBot → /pay → Создать приложение
CRYPTOBOT_TOKEN=12345:ABCdefGHIjklMNO

# ── YooKassa ──────────────────────────────────────────────────
YUKASSA_ENABLED=true
# Получи в личном кабинете yookassa.ru
YUKASSA_SHOP_ID=123456
YUKASSA_SECRET_KEY=live_ABCdefGHIjklMNOpqrs

# ── n8n ───────────────────────────────────────────────────────
# URL вебхука в n8n (создай воркфлоу с Webhook нодой)
N8N_WEBHOOK_URL=https://n8n.example.com/webhook/vps-events
N8N_API_KEY=your_n8n_api_key
N8N_DOMAIN=n8n.example.com
N8N_USER=admin
N8N_PASSWORD=strong_n8n_password
# БД для n8n (использует ту же PostgreSQL)
N8N_DB=n8n

# ── Security ──────────────────────────────────────────────────
# Генерируй: openssl rand -hex 32
API_SECRET_TOKEN=generate_me_with_openssl
RATE_LIMIT_MESSAGES=30
RATE_LIMIT_PAYMENTS=5

# ── App ───────────────────────────────────────────────────────
SUPPORT_USERNAME=@your_support
LOG_LEVEL=INFO
TZ=Europe/Moscow

# ── Caddy domains (замени на свои) ────────────────────────────
# Используются в caddy/Caddyfile
# Поменяй bot.example.com → твой домен
# Поменяй n8n.example.com → твой n8n домен

# ── Antifrod ──────────────────────────────────────────────────
# Максимум VPS на одного пользователя
MAX_VPS_PER_USER=5

# ── Реферальная программа ────────────────────────────────────
REFERRAL_ENABLED=true
# Бонус рефереру за каждого оплатившего реферала
REFERRAL_BONUS_RUB=50
REFERRAL_BONUS_USDT=0.5

# ── Уведомления о покупках ───────────────────────────────────
# ID канала или группы для алертов о новых покупках (опционально)
# Для супергруппы с топиками: NOTIFY_CHANNEL_ID=-100xxxxxxxxx, NOTIFY_TOPIC_ID=123
NOTIFY_CHANNEL_ID=
NOTIFY_TOPIC_ID=

# ── Автобекап ────────────────────────────────────────────────
# Ежедневно отправляет SQL-дамп всем администраторам в Telegram
AUTO_BACKUP_ENABLED=false
AUTO_BACKUP_HOUR=3
